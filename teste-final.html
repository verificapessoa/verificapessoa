<!DOCTYPE html>
<html>
<head>
    <meta charset=\"UTF-8\">
    <title>Teste Final</title>
</head>
<body style=\"background: #0a0a0a; color: white; padding: 20px; font-family: monospace;\">
    <h1 style=\"color: lime;\">🔥 TESTE DEFINITIVO</h1>
    <div style=\"margin: 20px 0;\">
        <button onclick=\"testarRegistro()\" style=\"padding: 15px 30px; font-size: 18px; cursor: pointer; background: lime; border: none;\">
            CLIQUE PARA TESTAR
        </button>
    </div>
    <div id=\"logs\" style=\"background: #1a1a1a; padding: 10px; border: 1px solid #333; min-height: 300px; max-height: 500px; overflow-y: auto;\"></div>

    <script>
        // Função de log
        function log(msg, cor = 'white') {
            const logsDiv = document.getElementById('logs');
            const time = new Date().toLocaleTimeString();
            logsDiv.innerHTML += `<div style=\"color: ${cor}; margin: 5px 0;\">[${time}] ${msg}</div>`;
            logsDiv.scrollTop = logsDiv.scrollHeight;
            console.log(msg);
        }

        log('✅ Página carregada', 'lime');
        log('✅ JavaScript funcionando', 'lime');

        async function testarRegistro() {
            log('🚀 Função testarRegistro() chamada!', 'yellow');
            
            const email = 'teste' + Date.now() + '@teste.com';
            const senha = 'senha123';
            
            log('📧 Email: ' + email, 'cyan');
            log('🔒 Senha: ***', 'cyan');
            
            const url = 'https://verificapessoa-api.onrender.com/api/auth/register';
            log('🌐 URL: ' + url, 'cyan');
            
            try {
                log('📤 Enviando requisição...', 'yellow');
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        email: email, 
                        password: senha 
                    })
                });
                
                log('📥 Resposta recebida!', 'yellow');
                log('📊 Status: ' + response.status, response.ok ? 'lime' : 'red');
                log('📊 OK: ' + response.ok, response.ok ? 'lime' : 'red');
                
                const data = await response.json();
                log('📦 Dados: ' + JSON.stringify(data, null, 2), 'cyan');
                
                if (response.ok) {
                    log('✅✅✅ SUCESSO! CONTA CRIADA!', 'lime');
                    alert('✅ FUNCIONOU! Conta criada: ' + email);
                } else {
                    log('❌ ERRO: ' + data.detail, 'red');
                    alert('❌ Erro: ' + data.detail);
                }
                
            } catch (error) {
                log('❌❌❌ ERRO NA REQUISIÇÃO!', 'red');
                log('❌ Erro: ' + error.message, 'red');
                log('❌ Nome: ' + error.name, 'red');
                alert('❌ ERRO: ' + error.message);
            }
        }

        log('✅ Script completo carregado!', 'lime');
        log('⏳ Aguardando clique no botão...', 'yellow');
    </script>
</body>
</html>
